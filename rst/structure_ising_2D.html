
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Structure Evolution of Ising Model &mdash; PyMKS</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/pymks_logo.ico"/>
    <link rel="top" title="PyMKS" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/pymks_logo.png">
          PyMKS</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="INSTALLATION.html">Installation</a></li>
                <li><a href="../EXAMPLES.html">Examples</a></li>
                <li><a href="../API.html">API</a></li>
                <li><a href="https://github.com/materialsinnovation/pymks/">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">More <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../THEORY.html">Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="derivation.html">Derivation of MKS Localization Equation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tech_overview.html">Technical Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CREDITS.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CITATION.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="REQUIREMENTS.html">Requirements</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="structure-evolution-of-ising-model">
<h1>Structure Evolution of Ising Model<a class="headerlink" href="#structure-evolution-of-ising-model" title="Permalink to this headline">¶</a></h1>
<p>In this example we will take a look at the simulated data. Data was
obtained using SPPARKS kinetic Monte-Carlo simulator for 2 phase ising
model. The model is 2D and the volume fraction of one phase is varied
for different simulations. Microstructures are assumed to be periodic.</p>
<div class="section" id="data-loading">
<h2>Data loading<a class="headerlink" href="#data-loading" title="Permalink to this headline">¶</a></h2>
<p>First, we load the data:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymks</span>
<span class="kn">from</span> <span class="nn">pymks_share</span> <span class="kn">import</span> <span class="n">DataManager</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>


<span class="n">manager</span> <span class="o">=</span> <span class="n">DataManager</span><span class="p">(</span><span class="s1">&#39;pymks.me.gatech.edu&#39;</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="s1">&#39;2 phase ising model&#39;</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="s1">&#39;Ising 30%&#39;</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="s1">&#39;ising 10%&#39;</span><span class="p">)</span>
<span class="n">R1</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="s1">&#39;Ising 40%_Run#1&#39;</span><span class="p">)</span>
<span class="n">R2</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="s1">&#39;Ising 40%_Run#3&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">R1</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">((</span><span class="mi">201</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">X</span></code> refers to 50% volume fraction and the rest of the data has its
volume fraction in its name.</p>
<p>Let&#8217;s take a look how initial microstructures look like for three
different volume fractions (50%, 30%, 10%) using
<code class="docutils literal"><span class="pre">draw_microstructures</span></code>:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span>%matplotlib inline
%load_ext autoreload
%autoreload 2

import matplotlib.pylab as plt
from pymks.tools import draw_microstructures


X_con = np.concatenate((X, Y, Z, R1, R2))
draw_microstructures((X_con[::201]))
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_3_0.png" src="../_images/structure_ising_2D_3_0.png" />
<p>And the corresponding final microstructures after simulation (200
Monte-Carlo steps) look like these:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">draw_microstructures</span><span class="p">((</span><span class="n">X_con</span><span class="p">[</span><span class="mi">200</span><span class="p">::</span><span class="mi">201</span><span class="p">]))</span>
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_5_0.png" src="../_images/structure_ising_2D_5_0.png" />
<p>So, this is a microstructure evolution problem, and final
microstructures look very similar to each other (just looking at them).
Can we check it using PyMKS tools? We have 200 files (microstructure
outputs) for each simulation at every fixed Monte-Carlo step, so we can
also take a look at path each simulation takes.</p>
</div>
<div class="section" id="microstructure-statistics">
<h2>Microstructure Statistics<a class="headerlink" href="#microstructure-statistics" title="Permalink to this headline">¶</a></h2>
<p>To get started, we are going to perform 2-point statistics first for
couple of microstructures using <code class="docutils literal"><span class="pre">correlate</span></code> from <code class="docutils literal"><span class="pre">pymks.stats</span></code> :</p>
<p>The correlations can be plotted using <code class="docutils literal"><span class="pre">draw_autocorrelations</span></code> from
<code class="docutils literal"><span class="pre">pymks.tools</span></code>. Here 10th step is plotted since initial is completely
random microstructure and its statistics does not look exciting. So, we
are going to take a look at 10th Monte-Carlo step output.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks</span> <span class="kn">import</span> <span class="n">PrimitiveBasis</span>
<span class="kn">from</span> <span class="nn">pymks.stats</span> <span class="kn">import</span> <span class="n">correlate</span>
<span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_autocorrelations</span>


<span class="n">p_basis</span> <span class="o">=</span> <span class="n">PrimitiveBasis</span><span class="p">(</span><span class="n">n_states</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">X_auto</span> <span class="o">=</span> <span class="n">correlate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">p_basis</span><span class="p">,</span> <span class="n">periodic_axes</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">correlations</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>

<span class="n">X_auto</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">correlations</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">)]</span>
<span class="n">draw_autocorrelations</span><span class="p">(</span><span class="n">X_auto</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">autocorrelations</span><span class="o">=</span><span class="n">correlations</span><span class="p">)</span>

<span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">X_auto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
<span class="k">print</span> <span class="s1">&#39;Volume fraction of black phase&#39;</span><span class="p">,</span> <span class="n">X_auto</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s1">&#39;Volume fraction of white phase&#39;</span><span class="p">,</span> <span class="n">X_auto</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_9_0.png" src="../_images/structure_ising_2D_9_0.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span>Volume fraction of black phase 0.6099
Volume fraction of white phase 0.3901
</pre></div>
</div>
<p>Let&#8217;s also plot 2-point statistics of the final microstructure for the
same simulation. They do not look much interesting since it&#8217;s mostly has
black state:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">draw_autocorrelations</span><span class="p">(</span><span class="n">X_auto</span><span class="p">[</span><span class="mi">200</span><span class="p">],</span> <span class="n">autocorrelations</span><span class="o">=</span><span class="n">correlations</span><span class="p">)</span>
<span class="k">print</span> <span class="s1">&#39;Volume fraction of black phase&#39;</span><span class="p">,</span> <span class="n">X_auto</span><span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s1">&#39;Volume fraction of white phase&#39;</span><span class="p">,</span> <span class="n">X_auto</span><span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_11_0.png" src="../_images/structure_ising_2D_11_0.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span>Volume fraction of black phase 0.9542
Volume fraction of white phase 0.0458
</pre></div>
</div>
</div>
<div class="section" id="reduced-order-representations-pca">
<h2>Reduced-order representations (PCA)<a class="headerlink" href="#reduced-order-representations-pca" title="Permalink to this headline">¶</a></h2>
<p>Using <code class="docutils literal"><span class="pre">MKSStructureAnalysis</span></code> we can perform 2-points statistics and
dimentionality reduction (PCA) right after. So we are not going to use
whatever we have done in the previous section, it was just to show how
2-point statistics look like for our data. So, total we have 5
simulations and they already have been concatenated into X_con.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks</span> <span class="kn">import</span> <span class="n">MKSStructureAnalysis</span>

<span class="n">analyzer</span> <span class="o">=</span> <span class="n">MKSStructureAnalysis</span><span class="p">(</span><span class="n">basis</span><span class="o">=</span><span class="n">p_basis</span><span class="p">,</span> <span class="n">periodic_axes</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">XY_PCA</span><span class="o">=</span><span class="n">analyzer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_con</span><span class="p">)</span>
<span class="n">XY_PCA</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1005</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>R1 and R2 are two different simulation results with the same initial
microstructure, but different seeds for random number generation for
Monte-Carlo simulations. The hope is to see that the same initial
microstructure will take two different paths and will end up in quite
the same spot. Let&#8217;s check it!</p>
<p>So let&#8217;s take a look at PCA plot:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_components_scatter</span>


<span class="n">draw_components_scatter</span><span class="p">([</span><span class="n">XY_PCA</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">201</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">201</span><span class="p">:</span><span class="mi">402</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">402</span><span class="p">:</span><span class="mi">603</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span>
                         <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">603</span><span class="p">:</span><span class="mi">804</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">804</span><span class="p">:</span><span class="mi">1005</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]],</span>
                        <span class="p">[</span><span class="s1">&#39;ising 50%&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 30%&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 10%&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ising 40</span><span class="si">% r</span><span class="s1">un#1&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 40</span><span class="si">% r</span><span class="s1">un#2&#39;</span><span class="p">],</span>
                        <span class="n">view_angles</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">legend_outside</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fig_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_15_0.png" src="../_images/structure_ising_2D_15_0.png" />
<p>Looks cool but not clear! Now, let&#8217;s plot only initial and final
structures.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">draw_components_scatter</span><span class="p">([</span><span class="n">XY_PCA</span><span class="p">[:</span><span class="mi">201</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">201</span><span class="p">:</span><span class="mi">402</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span>
                         <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">402</span><span class="p">:</span><span class="mi">603</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">603</span><span class="p">:</span><span class="mi">804</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span>
                         <span class="n">XY_PCA</span><span class="p">[</span><span class="mi">804</span><span class="p">:</span><span class="mi">1005</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]],</span>
                        <span class="p">[</span><span class="s1">&#39;ising 50%&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 30%&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 10%&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ising 40</span><span class="si">% r</span><span class="s1">un#1&#39;</span><span class="p">,</span> <span class="s1">&#39;ising 40</span><span class="si">% r</span><span class="s1">un#2&#39;</span><span class="p">],</span>
                        <span class="n">view_angles</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">legend_outside</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                        <span class="n">fig_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Initial and Final microstructures&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/structure_ising_2D_17_0.png" src="../_images/structure_ising_2D_17_0.png" />
<p>The clustering on the top left side is final structures, while the
spread is initial structures. Note: there are only four initial visible
structures since two last runs start with the same initial
microstructures.</p>
<p>From these five simulations we can tell that different initial
microstructures merge into similar ones after Monte-Carlo simulations
although they take different paths.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>