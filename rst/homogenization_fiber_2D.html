
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Effective Stiffness of Fiber Composite &mdash; PyMKS</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/pymks_logo.ico"/>
    <link rel="top" title="PyMKS" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/pymks_logo.png">
          PyMKS</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="INSTALLATION.html">Installation</a></li>
                <li><a href="../EXAMPLES.html">Examples</a></li>
                <li><a href="../API.html">API</a></li>
                <li><a href="https://github.com/materialsinnovation/pymks/">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">More <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../THEORY.html">Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="derivation.html">Derivation of MKS Localization Equation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tech_overview.html">Technical Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CREDITS.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CITATION.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="REQUIREMENTS.html">Requirements</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="effective-stiffness-of-fiber-composite">
<h1>Effective Stiffness of Fiber Composite<a class="headerlink" href="#effective-stiffness-of-fiber-composite" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates the use of the homogenization model from pyMKS
on a set of fiber-like structures. These structures are simulated to
emulate fiber-reinforced polymer samples. For a summary of
homogenization theory and its use with effective stiffness properties
please see the <a class="reference external" href="http://materialsinnovation.github.io/pymks/rst/stress_homogenization_2D.html">Effective Siffness
example</a>.
This example will first generate a series of random microstructures with
various fiber lengths and volume fraction. The ability to vary the
volume fraction is a new functionality of this example. Then the
generated stuctures will be used to calibrate and test the model based
on simulated effective stress values. Finally we will show that the
simulated response compare favorably with those generated by the model.</p>
</div>
<div class="section" id="generating-structures">
<h2>Generating Structures<a class="headerlink" href="#generating-structures" title="Permalink to this headline">¶</a></h2>
<p>These first lines inport important packages that will be used to run
pymks.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span>import pymks

%matplotlib inline
%load_ext autoreload
%autoreload 2

import numpy as np
import matplotlib.pyplot as plt
</pre></div>
</div>
<p>Now we are defining the parameters which we will use to create the
microstructures. <code class="docutils literal"><span class="pre">n_samples</span></code> will determine how many microstructures
of a particular volume fraction we want to create. <code class="docutils literal"><span class="pre">size</span></code> determines
the number of pixels we want to be included in the microstructure. We
will define the material properties to be used in the finite element in
<code class="docutils literal"><span class="pre">elastic_modulus</span></code>, <code class="docutils literal"><span class="pre">poissons_ratio</span></code> and <code class="docutils literal"><span class="pre">macro_strain</span></code>.
<code class="docutils literal"><span class="pre">n_phases</span></code> and <code class="docutils literal"><span class="pre">grain_size</span></code> will determine the physical
characteristics of the microstructure. We are using a high aspect ratio
in creating our microstructures to simulate fiber-like structures. The
<code class="docutils literal"><span class="pre">volume_fraction</span></code> variable will be used to vary the fraction of each
phase. The sum of the volume fractions must be equal to 1. The
<code class="docutils literal"><span class="pre">percent_variance</span></code> variable introduces some variation in the volume
fraction up to the specified percentage.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">sample_size</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">[</span><span class="n">sample_size</span><span class="p">]</span>
<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
<span class="n">elastic_modulus</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.3</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">poissons_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.42</span><span class="p">,</span> <span class="o">.</span><span class="mi">22</span><span class="p">)</span>
<span class="n">macro_strain</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">n_phases</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">grain_size</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="n">v_frac</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)]</span>
<span class="n">per_ch</span> <span class="o">=</span> <span class="mf">0.1</span>
</pre></div>
</div>
<p>Now we will create the microstructures and generate their responses
using the <code class="docutils literal"><span class="pre">make_elastic_stress_random</span></code> function from pyMKS. Four
datasets are created to create the four different volume fractions that
we are simulating. Then the datasets are combined into one variable. The
volume fractions are listed in the variable <code class="docutils literal"><span class="pre">v_frac</span></code>. Variation around
the specified volume fraction can be obtained by varying <code class="docutils literal"><span class="pre">per_ch</span></code>. The
variation is randomly generated according a uniform distribution around
the specified volume fraction.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.datasets</span> <span class="kn">import</span> <span class="n">make_elastic_stress_random</span>


<span class="n">dataset</span><span class="p">,</span> <span class="n">stresses</span> <span class="o">=</span> <span class="n">make_elastic_stress_random</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">grain_size</span><span class="o">=</span><span class="n">grain_size</span><span class="p">,</span>
                                                 <span class="n">elastic_modulus</span><span class="o">=</span><span class="n">elastic_modulus</span><span class="p">,</span> <span class="n">poissons_ratio</span><span class="o">=</span><span class="n">poissons_ratio</span><span class="p">,</span>
                                                 <span class="n">macro_strain</span><span class="o">=</span><span class="n">macro_strain</span><span class="p">,</span> <span class="n">volume_fraction</span><span class="o">=</span><span class="n">v_frac</span><span class="p">,</span>
                                                 <span class="n">percent_variance</span><span class="o">=</span><span class="n">per_ch</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we are going to print out a few microstructres to look at how the
fiber length, orientation and volume fraction are varied.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_microstructures</span>
<span class="n">examples</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[::</span><span class="n">sample_size</span><span class="p">]</span>
<span class="n">draw_microstructures</span><span class="p">(</span><span class="n">examples</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/homogenization_fiber_2D_9_0.png" src="../_images/homogenization_fiber_2D_9_0.png" />
</div>
<div class="section" id="creating-the-model">
<h2>Creating the Model<a class="headerlink" href="#creating-the-model" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Next we are going to initiate the model. The MKSHomogenizationModel
takes in microstructures and runs two-point statistics on them to get
a statistical representation of the microstructures. An expalnation of
the use of two-point statistics can be found in the <a class="reference external" href="http://materialsinnovation.github.io/pymks/rst/checker_board.html">Checkerboard
Microstructure
Example</a>.
Then the model uses PCA and regression models to create a linkage
between the calcualted properties and structures.</div>
<div class="line">Here we simply initiate the model.</div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks</span> <span class="kn">import</span> <span class="n">MKSHomogenizationModel</span>
<span class="kn">from</span> <span class="nn">pymks</span> <span class="kn">import</span> <span class="n">PrimitiveBasis</span>


<span class="n">p_basis</span> <span class="o">=</span> <span class="n">PrimitiveBasis</span><span class="p">(</span><span class="n">n_states</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">MKSHomogenizationModel</span><span class="p">(</span><span class="n">basis</span><span class="o">=</span><span class="n">p_basis</span><span class="p">,</span> <span class="n">correlations</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">periodic_axes</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>Now we are going to split our data into testing and training segments so
we can test and see if our model can accurately predict the effective
stress.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <span class="n">train_test_split</span>


<span class="n">flat_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span> <span class="o">+</span> <span class="p">(</span><span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="p">,)</span>
<span class="n">data_train</span><span class="p">,</span> <span class="n">data_test</span><span class="p">,</span> <span class="n">stress_train</span><span class="p">,</span> <span class="n">stress_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">dataset</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">flat_shape</span><span class="p">),</span> <span class="n">stresses</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>We will use sklearn&#8217;s GridSearchCV to optimize the <code class="docutils literal"><span class="pre">n_components</span></code> and
<code class="docutils literal"><span class="pre">degree</span></code> for our model. Let&#8217;s search over the range of 1st order to
3rd order polynomial for <code class="docutils literal"><span class="pre">degree</span></code> and 2 to 7 principal components for
<code class="docutils literal"><span class="pre">n_components</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.grid_search</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>


<span class="n">params_to_tune</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;degree&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;n_components&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)}</span>
<span class="n">fit_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">}</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">params_to_tune</span><span class="p">,</span> <span class="n">fit_params</span><span class="o">=</span><span class="n">fit_params</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data_train</span><span class="p">,</span> <span class="n">stress_train</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s take a look at the results.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Order of Polynomial&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">gs</span><span class="o">.</span><span class="n">best_estimator_</span><span class="o">.</span><span class="n">degree</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Number of Components&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">gs</span><span class="o">.</span><span class="n">best_estimator_</span><span class="o">.</span><span class="n">n_components</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;R-squared Value&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">gs</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">data_test</span><span class="p">,</span> <span class="n">stress_test</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>Order of Polynomial 3
Number of Components 5
R-squared Value 0.863487103782
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_gridscores_matrix</span>

<span class="n">draw_gridscores_matrix</span><span class="p">(</span><span class="n">gs</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;n_components&#39;</span><span class="p">,</span> <span class="s1">&#39;degree&#39;</span><span class="p">],</span> <span class="n">score_label</span><span class="o">=</span><span class="s1">&#39;R-Squared&#39;</span><span class="p">,</span>
                       <span class="n">param_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Number of Components&#39;</span><span class="p">,</span> <span class="s1">&#39;Order of Polynomial&#39;</span><span class="p">])</span>
</pre></div>
</div>
<img alt="../_images/homogenization_fiber_2D_18_0.png" src="../_images/homogenization_fiber_2D_18_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_gridscores</span>

<span class="n">gs_deg_1</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gs</span><span class="o">.</span><span class="n">grid_scores_</span> \
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">gs_deg_2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gs</span><span class="o">.</span><span class="n">grid_scores_</span> \
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">gs_deg_3</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gs</span><span class="o">.</span><span class="n">grid_scores_</span> \
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">draw_gridscores</span><span class="p">([</span><span class="n">gs_deg_1</span><span class="p">,</span>  <span class="n">gs_deg_2</span><span class="p">,</span> <span class="n">gs_deg_3</span><span class="p">],</span> <span class="s1">&#39;n_components&#39;</span><span class="p">,</span>
                <span class="n">data_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;1st Order&#39;</span><span class="p">,</span> <span class="s1">&#39;2nd Order&#39;</span><span class="p">,</span> <span class="s1">&#39;3rd Order&#39;</span><span class="p">],</span>
                <span class="n">param_label</span><span class="o">=</span><span class="s1">&#39;Number of Components&#39;</span><span class="p">,</span> <span class="n">score_label</span><span class="o">=</span><span class="s1">&#39;R-Squared&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/homogenization_fiber_2D_19_0.png" src="../_images/homogenization_fiber_2D_19_0.png" />
<p>Our best model was found to have <code class="docutils literal"><span class="pre">degree</span></code> equal to 3 and
<code class="docutils literal"><span class="pre">n_components</span></code> equal to 5. Let&#8217;s go ahead and use it.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">best_estimator_</span>
</pre></div>
</div>
<div class="section" id="structures-in-pca-space">
<h3>Structures in PCA space<a class="headerlink" href="#structures-in-pca-space" title="Permalink to this headline">¶</a></h3>
<p>Now we want to draw how the samples are spread out in PCA space and look
at how the testing and training data line up.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_components_scatter</span>


<span class="n">stress_predict</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">data_test</span><span class="p">)</span>
<span class="n">draw_components_scatter</span><span class="p">([</span><span class="n">model</span><span class="o">.</span><span class="n">reduced_fit_data</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">],</span>
                         <span class="n">model</span><span class="o">.</span><span class="n">reduced_predict_data</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]],</span>
                        <span class="p">[</span><span class="s1">&#39;Training Data&#39;</span><span class="p">,</span> <span class="s1">&#39;Testing Data&#39;</span><span class="p">],</span>
                        <span class="n">legend_outside</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/homogenization_fiber_2D_23_0.png" src="../_images/homogenization_fiber_2D_23_0.png" />
<p>It looks like there is pretty good agreement between the testing and the
training data. We can also see that the four different fiber sizes are
seperated in the PC space.</p>
</div>
<div class="section" id="draw-goodness-of-fit">
<h3>Draw Goodness of fit<a class="headerlink" href="#draw-goodness-of-fit" title="Permalink to this headline">¶</a></h3>
<p>Now we are going to look at how well our model predicts the properties
of the structures. The calculated properties will be plotted against the
properties generated by the model. We should see a linear realtionship
with a slope of 1.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymks.tools</span> <span class="kn">import</span> <span class="n">draw_goodness_of_fit</span>


<span class="n">fit_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">stresses</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dataset</span><span class="p">)])</span>
<span class="n">pred_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">stress_test</span><span class="p">,</span> <span class="n">stress_predict</span><span class="p">])</span>
<span class="n">draw_goodness_of_fit</span><span class="p">(</span><span class="n">fit_data</span><span class="p">,</span> <span class="n">pred_data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Training Data&#39;</span><span class="p">,</span> <span class="s1">&#39;Testing Data&#39;</span><span class="p">])</span>
</pre></div>
</div>
<img alt="../_images/homogenization_fiber_2D_26_0.png" src="../_images/homogenization_fiber_2D_26_0.png" />
<p>Yay! There is a good corrolation between the FE results and those
predicted by our linkage.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>